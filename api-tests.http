### Fabrikam API Testing Collection
### Use this file with REST Client extension or similar tools

# Variables
@baseUrl = https://localhost:7297
@prodBaseUrl = https://your-production-api.azurewebsites.net

### Health Check
GET {{baseUrl}}/api/info
Accept: application/json

### 
### ORDERS ENDPOINTS
###

### Get all orders (basic)
GET {{baseUrl}}/api/orders
Accept: application/json

### Get orders with pagination
GET {{baseUrl}}/api/orders?page=1&pageSize=5
Accept: application/json

### Get orders with filters
GET {{baseUrl}}/api/orders?status=pending&region=Southwest&fromDate=2025-01-01
Accept: application/json

### Get specific order
GET {{baseUrl}}/api/orders/1
Accept: application/json

### Get sales analytics (THE CRITICAL ONE for MCP)
GET {{baseUrl}}/api/orders/analytics
Accept: application/json

### Get sales analytics with date range
GET {{baseUrl}}/api/orders/analytics?fromDate=2025-01-01&toDate=2025-12-31
Accept: application/json

###
### CUSTOMERS ENDPOINTS
###

### Get all customers
GET {{baseUrl}}/api/customers
Accept: application/json

### Get specific customer
GET {{baseUrl}}/api/customers/1
Accept: application/json

###
### SUPPORT TICKETS ENDPOINTS
###

### Get all support tickets (default: active tickets)
GET {{baseUrl}}/api/supporttickets
Accept: application/json

### Get support tickets with filters
GET {{baseUrl}}/api/supporttickets?status=Open&priority=High&urgent=true
Accept: application/json

### Get support tickets by status
GET {{baseUrl}}/api/supporttickets?status=InProgress
Accept: application/json

### Get support tickets with pagination
GET {{baseUrl}}/api/supporttickets?page=1&pageSize=10
Accept: application/json

### Get specific support ticket
GET {{baseUrl}}/api/supporttickets/1
Accept: application/json

### Get support ticket analytics
GET {{baseUrl}}/api/supporttickets/analytics
Accept: application/json

### Create a new support ticket
POST {{baseUrl}}/api/supporttickets
Content-Type: application/json

{
  "customerId": 1,
  "orderId": 1,
  "subject": "Installation Question - Foundation Requirements",
  "description": "Customer wants to know about foundation requirements for The Pioneer model. They are building on rocky terrain.",
  "priority": "Medium",
  "category": "Installation"
}

### Update support ticket status
PATCH {{baseUrl}}/api/supporttickets/1/status
Content-Type: application/json

{
  "status": "InProgress",
  "priority": "High",
  "assignedTo": "Sarah Johnson"
}

### Add a note to support ticket
POST {{baseUrl}}/api/supporttickets/1/notes
Content-Type: application/json

{
  "note": "Contacted customer to discuss foundation options. Recommended concrete slab with footings.",
  "createdBy": "Sarah Johnson",
  "isInternal": false
}

###
### PRODUCTS ENDPOINTS
###

### Get all products
GET {{baseUrl}}/api/products
Accept: application/json

### Get specific product
GET {{baseUrl}}/api/products/1
Accept: application/json

###
### SUPPORT TICKETS ENDPOINTS
###

### Get all support tickets
GET {{baseUrl}}/api/supporttickets
Accept: application/json

### Get support tickets with filters
GET {{baseUrl}}/api/supporttickets?status=open&priority=high
Accept: application/json

### Get specific support ticket
GET {{baseUrl}}/api/supporttickets/1
Accept: application/json

###
### ERROR TESTING
###

### Test non-existent endpoint
GET {{baseUrl}}/api/nonexistent
Accept: application/json

### Test invalid ID
GET {{baseUrl}}/api/orders/999999
Accept: application/json

###
### PRODUCTION TESTING (when deployed)
###

### Production analytics endpoint
# GET {{prodBaseUrl}}/api/orders/analytics
# Accept: application/json

### Production health check
# GET {{prodBaseUrl}}/api/info
# Accept: application/json
